<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr">
<!-- InstanceBegin template="/Templates/Full Page Layout.dwt" codeOutsideHTMLIsLocked="false" -->
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <!-- Web Experience Toolkit (WET) / Boîte à outils de l'expérience Web (BOEW)
            wet-boew.github.io/wet-boew/License-en.html / wet-boew.github.io/wet-boew/Licence-fr.html -->
    <!-- InstanceBeginEditable name="PageTitle" -->
    <title>Find a drone flight school near you - Drone Management Portal Administration</title>
    <!-- InstanceEndEditable -->
    <meta content="width=device-width,initial-scale=1" name="viewport">
    <!-- Meta data -->
    <meta name="description" content="">
    <!-- Meta data-->
    <!--[if gte IE 9 | !IE ]><!-->
    <link href="../../GCWeb/assets/favicon.ico" rel="icon" type="image/x-icon">
    <link rel="stylesheet" href="../../GCWeb/css/theme.min.css">
    <link rel="stylesheet" href="../../css/cdtsapps.css">
    <link rel="stylesheet" href="../../css/fontawesome/css/all.css">
    <link rel="stylesheet" href="../../css/uav-vasp.css">
    <link rel="stylesheet" href="../../css/utils.css">
    <link rel="stylesheet" href="../../css/plugins.css">
    <!--<![endif]-->
    <!--[if lt IE 9]>
            <link href="../GCWeb/assets/favicon.ico" rel="shortcut icon" />

            <link rel="stylesheet" href="../GCWeb/css/ie8-theme.min.css" />
            <script src="../js/jquery/1.11.1/jquery.min.js"></script>
            <script src="../wet-boew/js/ie8-wet-boew.min.js"></script>
            <![endif]-->
    <!--[if lte IE 9]>


            <![endif]-->
    <noscript>
        <link rel="stylesheet" href="../../wet-boew/css/noscript.min.css" />
    </noscript>
    <!-- InstanceBeginEditable name="CustomJSLibraries" -->
    <script src="../../js/jquery/2.2.4/jquery.js"></script>

    <!-- InstanceEndEditable -->
    <!-- InstanceBeginEditable name="CustomCSS" -->
    <!-- InstanceEndEditable -->
</head>

<body class="secondary" vocab="http://schema.org/" typeof="WebPage">
    <ul id="wb-tphp">
        <li class="wb-slc"> <a class="wb-sl" href="#wb-cont">Skip to main content</a> </li>
        <li class="wb-slc visible-sm visible-md visible-lg"> <a class="wb-sl" href="#wb-info">Skip to "About this Web application"</a> </li>
    </ul>
    <header role="banner">
        <div id="wb-bnr" class="container">
            <div class="row">
                <div class="brand col-xs-9 col-sm-8 col-md-6">
                    <object type="image/svg+xml" tabindex="-1" data="https://ssl-templates.services.gc.ca/app/cls/WET/gcweb/v4_0_30/assets/sig-blk-en.svg"></object>
                    <span class="wb-inv"> Government of Canada / <span lang="fr">Gouvernement du Canada</span></span>
                </div>
                <section id="wb-lng" class="text-right col-xs-3 col-sm-4 col-md-6">
                    <h2 class="wb-inv">Language selection</h2>
                    <ul class="list-inline margin-bottom-none">
                        <li><a lang="fr" href="#">Français</a></li>
                    </ul>
                </section>
            </div>
        </div>
        <div class="app-bar">
            <div class="container">
                <div class="row">
                    <section class="col-xs-12 col-sm-7">
                        <h2 class="wb-inv">Transport Canada Drone Management Portal</h2>
                        <a class="app-name" href="#">
                            Transport Canada <br>
                            Drone Management Portal
                        </a>
                    </section>
                    <nav class="col-sm-5 hidden-xs hidden-print" role="navigation">
                        <h2 class="wb-inv">Account menu</h2>
                        <ul class="app-list-account list-unstyled">
                            <li><a href="../accountSettings/accountSettings.html" class="btn"><span class="glyphicon glyphicon-cog" aria-hidden="true"></span> Account settings</a></li>
                            <li><a href="../signedOut.html" class="btn"><span class="glyphicon glyphicon-off" aria-hidden="true"></span> Sign out</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
        <nav role="navigation" id="wb-bc" property="breadcrumb">
            <h2>You are here:</h2>
            <div class="container">
                <div class="row">
                    <ol class="breadcrumb">
                        <li><a href="../welcome.html">Home</a></li>
                        <!-- InstanceBeginEditable name="Breadcrumbs" -->
                        <li>Find a drone flight school near you</li>
                        <!-- InstanceEndEditable -->
                    </ol>
                </div>
            </div>
        </nav>
    </header>
    <main role="main" property="mainContentOfPage" class="container">
        <!-- InstanceBeginEditable name="Content" -->
        <h1 property="name" id="wb-cont"><i class="fas fa-search"></i> Find a drone flight school near you</h1>
        <p>The following drone flight schools offer flight review services on behalf of Transport Canada. The flight school may choose to charge a flight review fee.</p>
        <section class="panel panel-default panel-datatable">
            <header class="panel-heading">
                <div class="row">
                    <div class="col-md-12">
                        <h2 class="mrgn-0 medium">Drone flight schools</h2>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <p>To find a drone flight school in your area, enter the name, city and/or province/territory:</p>
                        <div class="input-group">
                            <label for="filter" class="wb-inv">Filter by name, city and/or province/territory</label>
                            <input id="filter" name="filter" class="form-control full-width" size="35">
                            <span class="input-group-addon"><i class="fas fa-search"></i></span>
                        </div>
                    </div>
                </div>
            </header>
            <div class="table-responsive">
                <table id="tblflightSchool" class="table table-hover table-bordered dataTable">
                    <thead>
                        <tr>
                            <th scope="col" class="width40">Name </th>
                            <th scope="col" class="width20">Contact information </th>
                            <th scope="col" class="width40">Areas served</th>
                        </tr>
                    </thead>

                </table>
            </div>
            <footer class="panel-footer">
                <div class="row">
                    <div class="col-md-6 pddng-tp-sm pages">
                        <div class="bottom dataTables_wrapper"></div>
                    </div>
                    <div class="col-md-6 pddng-tp-sm displayOptions pull-right"> </div>
                </div>
            </footer>
        </section>
        <hr>
        <a href="#"><i class="fas fa-reply mrgn-rght-sm"></i>Return to Home</a> <!-- InstanceEndEditable -->
        <div class="pagedetails">
            <dl id="wb-dtmd">
                <dt>Date modified:&#32;</dt>
                <dd>
                    <time property="dateModified">
                        <!-- #BeginDate format:IS1 -->2018-10-03
                        <!-- #EndDate -->
                    </time>
                </dd>
            </dl>
        </div>
    </main>
    <footer role="contentinfo" id="wb-info">
        <div id="transactFooter" class="landscape"></div>
        <div class="brand">
            <div class="container">
                <div class="row">
                    <nav class="col-md-10 ftr-urlt-lnk">
                        <h2 class="wb-inv">About this Web application</h2>
                        <ul>
                            <li><a href="#">Contact information</a></li>
                            <li><a href="../termsConditions.html">Terms and conditions</a></li>
                            <li><a href="../privacy.html">Privacy</a></li>
                        </ul>
                    </nav>
                    <div class="col-xs-6 visible-sm visible-xs tofpg"><a href="#wb-cont">Top of Page <span class="glyphicon glyphicon-chevron-up"></span></a></div>
                    <div class="col-xs-6 col-md-2 text-right">
                        <object type="image/svg+xml" tabindex="-1" role="img" data="../../GCWeb/assets/wmms-blk.svg" aria-label="Symbol of the Government of Canada"></object>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <!--[if gte IE 9 | !IE ]><!-->
    <script src="../../js/jquery/2.2.4/jquery.js"></script>
    <script src="../../wet-boew/js/wet-boew.min.js"></script>
    <!--<![endif]-->
    <!--[if lt IE 9]>
            <script src="../wet-boew/js/ie8-wet-boew2.min.js"></script>

            <![endif]-->
    <script src="../../GCWeb/js/theme.min.js"></script>
    <!-- InstanceBeginEditable name="CustomJS" -->
    <script src="../../js/deps/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
        $(document).on("wb-ready.wb", function(event) {





            //var jsonUrl = "http://cawwwappsx/Saf-Sec-Sur/2/UASIMS/public/findFlightSchool/jsonImplementation/drone-schools.json";

            $.ajax({
                    url: 'http://cawwwappsx/Saf-Sec-Sur/2/UASIMS-SGISASP/api/ExportFlightSchool/GetExport',
                    contentType: 'application/html;charset=utf-8',
                    type: 'GET',
                    cache: false
                })
                .success(function(result) {
                    $('#tblflightSchool').DataTable({
                        processing: true,
                        ajax: "http://cawwwappsx/Saf-Sec-Sur/2/UASIMS-SGISASP/api/ExportFlightSchool/GetExport",
                        deferRender: true,
                        searchable: false,
                        info: false,
                        paging: false,
                        filter: false,
                        columns: [{
                                "data": "FlightSchoolName",
                                "orderable": true,
                                "className": "textFilter-match"
                            },
                            {
                                "data": "ContactInformation",
                                "orderable": true
                            },
                            {
                                "data": "AreasServed_EN",
                                "orderable": true,
                                "className": "textFilter-match"
                            }
                        ]
                    });
                })
                .error(function() {
                    $('#tblflightSchool').DataTable({
                        processing: true,
                        ajax: "../findFlightSchool/jsonImplementation/drone-schools.json",
                        deferRender: true,
                        searchable: false,
                        info: false,
                        paging: false,
                        filter: false,
                        columns: [{
                                "data": "FlightSchoolName",
                                "orderable": true,
                                "className": "textFilter-match"
                            },
                            {
                                "data": "ContactInformation",
                                "orderable": true,
                            },
                            {
                                "data": "AreasServed_EN",
                                "orderable": true,
                                "className": "textFilter-match"
                            }
                        ]
                    });
                })

            $('#tblflightSchool')
                .on('xhr.dt', function(event, settings, json, xhr) {
                    var data = json.data;

                    //Link each flight school name, add their address and add the contact information links
                    var flightSchools = [],
                        contactInformation = [];
                    $.each(data, function(index) {

                        var formatName;
                        if (this.URL != null || this.URL != "") {
                            formatName = "<a href='" + this.URL + "'>" + this.FlightSchoolName + "</a>";
                        } else {
                            formatName = this.FlightSchoolName;
                        }
                        if ((this.AddressLine1_EN !== undefined || this.AddressLine1_EN != null) && (this.AddressLine2_EN !== undefined || this.AddressLine2_EN != null)) {

                            formatName += "<address class='small mrgn-tp-md mrgn-bttm-0'>" + this.AddressLine1_EN + "<br>" + this.AddressLine2_EN + "</address>";
                        }
                        flightSchools.push(formatName);
                        this.FlightSchoolName = flightSchools[index];

                        var formatTel = "";
                        var formatEmail = "";
                        var formatURL = "";

                        if (this.TelephoneNumber !== undefined && this.TelephoneNumber != null) {
                            formatTel = "<i class='fas fa-phone mrgn-rght-sm'></i><a href='tel:" + this.TelephoneNumber + "'>" + this.TelephoneNumber + "</a><br>";
                        }
                        if ((this.Email !== undefined) && (this.Email != null)) {
                            formatEmail = "<i class='fas fa-envelope-open mrgn-rght-sm'></i><a href='mailto:" + this.Email + "'>" + this.Email + "</a><br>";
                        }
                        if (this.URL !== undefined && this.URL != null) {
                            formatURL = "<i class='fas fa-globe mrgn-rght-sm'></i><a href='" + this.URL + "'>" + this.URL + "</a>";
                        }

                        contactInformation.push(formatTel + formatEmail + formatURL);
                        this.ContactInformation = contactInformation[index];
                    });

                    json.data = data;


                });

            /* Datatable */
            $('.dataTables_length').addClass("pull-right").appendTo('.panel-datatable footer.panel-footer .displayOptions');
            $('.dataTables_paginate').appendTo('.panel-datatable footer.panel-footer .pages .bottom');

            $('.panel-datatable footer.panel-footer').css('padding-top', '0');
            $(".first.paginate_button, .last.paginate_button").hide();

            /* Initialize filter inputs */
            var defaultText = $('#filter').val();

            $('#filter')
                .focus(function(e) {
                    if ($(this).val() === defaultText)
                        $(this).val('');
                })
                .blur(function(e) {
                    if ($(this).val() === '')
                        $(this).val(defaultText);
                })
                .keyup(function(e) {
                    var patterns = $(this).val().toLowerCase().split(' ');

                    if (!patterns.length)
                        return;
                    $('tbody tr')
                        .hide()
                        .filter(function() {
                            var matchText = $(this)
                                .find('.textFilter-match')
                                .text()
                                .toLowerCase();
                            for (var i = 0; i < patterns.length; i++)
                                if (matchText.indexOf(patterns[i]) === -1)
                                    return false;
                            return true;
                        })
                        .show();
                });


        });

    </script> <!-- InstanceEndEditable -->
</body>
<!-- InstanceEnd -->

</html>
